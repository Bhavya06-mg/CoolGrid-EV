{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\Downloads\\\\CoolGrid-app\\\\frontend\\\\src\\\\pages\\\\BookingPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { Container, Spinner, Button, Card } from \"react-bootstrap\";\nimport io from \"socket.io-client\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst socket = io(\"http://localhost:5000\");\nfunction BookingPage() {\n  _s();\n  const [status, setStatus] = useState(\"PENDING\");\n  const [otp, setOtp] = useState(\"\");\n  const [supplier, setSupplier] = useState({});\n  const customerId = localStorage.getItem(\"customerId\");\n  useEffect(() => {\n    if (!customerId) return;\n\n    // Join the customer's private socket room\n    socket.emit(\"joinCustomerRoom\", customerId);\n    socket.on(\"requestAccepted\", data => {\n      console.log(\"‚úÖ Request accepted:\", data);\n      setStatus(\"ACCEPTED\");\n      setOtp(data.otp);\n      setSupplier({\n        name: data.supplierName,\n        phone: data.supplierPhone,\n        location: data.supplierLocation\n      });\n    });\n    socket.on(\"requestRejected\", () => {\n      setStatus(\"REJECTED\");\n    });\n    return () => {\n      socket.off(\"requestAccepted\");\n      socket.off(\"requestRejected\");\n    };\n  }, [customerId]);\n  const openGoogleMaps = () => {\n    if (!supplier.location) return;\n    const {\n      lat,\n      lng\n    } = supplier.location;\n    window.open(`https://www.google.com/maps?q=${lat},${lng}`, \"_blank\");\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"text-center mt-5\",\n    children: [status === \"PENDING\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u26A1 Booking Request\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"border\",\n        variant: \"info\",\n        className: \"mt-3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-3\",\n        children: \"Waiting for supplier approval...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), status === \"ACCEPTED\" && /*#__PURE__*/_jsxDEV(Card, {\n      className: \"p-4 shadow-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u2705 Supplier Accepted!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Supplier:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 14\n        }, this), \" \", supplier.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Phone:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 14\n        }, this), \" \", supplier.phone]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"OTP:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 14\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"b\", {\n          children: otp\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 36\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"success\",\n        onClick: openGoogleMaps,\n        children: \"\\uD83D\\uDCCD Trace Supplier Location\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this), status === \"REJECTED\" && /*#__PURE__*/_jsxDEV(Card, {\n      className: \"p-4 shadow-lg text-danger\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u274C Request Rejected\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"The supplier declined your charging request.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\n_s(BookingPage, \"3anCNc9vq5r352wUed7hQJZD3Qg=\");\n_c = BookingPage;\nexport default BookingPage;\nvar _c;\n$RefreshReg$(_c, \"BookingPage\");","map":{"version":3,"names":["React","useEffect","useState","Container","Spinner","Button","Card","io","jsxDEV","_jsxDEV","Fragment","_Fragment","socket","BookingPage","_s","status","setStatus","otp","setOtp","supplier","setSupplier","customerId","localStorage","getItem","emit","on","data","console","log","name","supplierName","phone","supplierPhone","location","supplierLocation","off","openGoogleMaps","lat","lng","window","open","className","children","fileName","_jsxFileName","lineNumber","columnNumber","animation","variant","onClick","_c","$RefreshReg$"],"sources":["C:/Users/LENOVO/Downloads/CoolGrid-app/frontend/src/pages/BookingPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Container, Spinner, Button, Card } from \"react-bootstrap\";\r\nimport io from \"socket.io-client\";\r\n\r\nconst socket = io(\"http://localhost:5000\");\r\n\r\nfunction BookingPage() {\r\n  const [status, setStatus] = useState(\"PENDING\");\r\n  const [otp, setOtp] = useState(\"\");\r\n  const [supplier, setSupplier] = useState({});\r\n  const customerId = localStorage.getItem(\"customerId\");\r\n\r\n  useEffect(() => {\r\n    if (!customerId) return;\r\n\r\n    // Join the customer's private socket room\r\n    socket.emit(\"joinCustomerRoom\", customerId);\r\n\r\n    socket.on(\"requestAccepted\", (data) => {\r\n      console.log(\"‚úÖ Request accepted:\", data);\r\n      setStatus(\"ACCEPTED\");\r\n      setOtp(data.otp);\r\n      setSupplier({\r\n        name: data.supplierName,\r\n        phone: data.supplierPhone,\r\n        location: data.supplierLocation,\r\n      });\r\n    });\r\n\r\n    socket.on(\"requestRejected\", () => {\r\n      setStatus(\"REJECTED\");\r\n    });\r\n\r\n    return () => {\r\n      socket.off(\"requestAccepted\");\r\n      socket.off(\"requestRejected\");\r\n    };\r\n  }, [customerId]);\r\n\r\n  const openGoogleMaps = () => {\r\n    if (!supplier.location) return;\r\n    const { lat, lng } = supplier.location;\r\n    window.open(`https://www.google.com/maps?q=${lat},${lng}`, \"_blank\");\r\n  };\r\n\r\n  return (\r\n    <Container className=\"text-center mt-5\">\r\n      {status === \"PENDING\" && (\r\n        <>\r\n          <h3>‚ö° Booking Request</h3>\r\n          <Spinner animation=\"border\" variant=\"info\" className=\"mt-3\" />\r\n          <p className=\"mt-3\">Waiting for supplier approval...</p>\r\n        </>\r\n      )}\r\n\r\n      {status === \"ACCEPTED\" && (\r\n        <Card className=\"p-4 shadow-lg\">\r\n          <h3>‚úÖ Supplier Accepted!</h3>\r\n          <p><strong>Supplier:</strong> {supplier.name}</p>\r\n          <p><strong>Phone:</strong> {supplier.phone}</p>\r\n          <p><strong>OTP:</strong> <b>{otp}</b></p>\r\n          <Button variant=\"success\" onClick={openGoogleMaps}>\r\n            üìç Trace Supplier Location\r\n          </Button>\r\n        </Card>\r\n      )}\r\n\r\n      {status === \"REJECTED\" && (\r\n        <Card className=\"p-4 shadow-lg text-danger\">\r\n          <h3>‚ùå Request Rejected</h3>\r\n          <p>The supplier declined your charging request.</p>\r\n        </Card>\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default BookingPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}