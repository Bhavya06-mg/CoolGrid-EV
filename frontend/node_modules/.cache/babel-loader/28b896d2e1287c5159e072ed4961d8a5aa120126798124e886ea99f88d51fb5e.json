{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Navbar,Nav,Container}from\"react-bootstrap\";import{Link,useNavigate}from\"react-router-dom\";import ProfileSlidePanel from\"./ProfileSlidePanel\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";function NavigationBar(){const[showProfile,setShowProfile]=useState(false);const[loggedIn,setLoggedIn]=useState(false);const navigate=useNavigate();// ðŸ”¥ Check authentication on mount AND whenever localStorage changes\nuseEffect(()=>{const token=localStorage.getItem(\"token\");setLoggedIn(!!token);},[]);// ðŸ”¥ Listen for login/logout changes globally\nuseEffect(()=>{const handleStorageChange=()=>{setLoggedIn(!!localStorage.getItem(\"token\"));};window.addEventListener(\"storage\",handleStorageChange);return()=>window.removeEventListener(\"storage\",handleStorageChange);},[]);const handleLogout=()=>{localStorage.clear();setLoggedIn(false);navigate(\"/login\");};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{bg:\"dark\",variant:\"dark\",expand:\"lg\",children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Navbar.Brand,{as:Link,to:\"/\",children:\"Coolgrid EV\"}),/*#__PURE__*/_jsx(Navbar.Toggle,{\"aria-controls\":\"nav\"}),/*#__PURE__*/_jsx(Navbar.Collapse,{id:\"nav\",children:/*#__PURE__*/_jsx(Nav,{className:\"ms-auto\",children:!loggedIn?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Nav.Link,{as:Link,to:\"/\",children:\"Home\"}),/*#__PURE__*/_jsx(Nav.Link,{as:Link,to:\"/login\",children:\"Login\"}),/*#__PURE__*/_jsx(Nav.Link,{as:Link,to:\"/register/customer\",children:\"Register Customer\"}),/*#__PURE__*/_jsx(Nav.Link,{as:Link,to:\"/register/supplier\",children:\"Register Supplier\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Nav.Link,{as:Link,to:\"/\",children:\"Home\"}),/*#__PURE__*/_jsx(Nav.Link,{onClick:()=>setShowProfile(true),children:\"\\uD83D\\uDC64 My Profile\"}),/*#__PURE__*/_jsx(Nav.Link,{onClick:handleLogout,children:\"\\uD83D\\uDEAA Logout\"})]})})})]})}),/*#__PURE__*/_jsx(ProfileSlidePanel,{show:showProfile,onClose:()=>setShowProfile(false)})]});}export default NavigationBar;","map":{"version":3,"names":["React","useEffect","useState","Navbar","Nav","Container","Link","useNavigate","ProfileSlidePanel","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","NavigationBar","showProfile","setShowProfile","loggedIn","setLoggedIn","navigate","token","localStorage","getItem","handleStorageChange","window","addEventListener","removeEventListener","handleLogout","clear","children","bg","variant","expand","Brand","as","to","Toggle","Collapse","id","className","onClick","show","onClose"],"sources":["C:/Users/LENOVO/Downloads/CoolGrid-app/frontend/src/components/Navbar.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Navbar, Nav, Container } from \"react-bootstrap\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport ProfileSlidePanel from \"./ProfileSlidePanel\";\r\n\r\nfunction NavigationBar() {\r\n  const [showProfile, setShowProfile] = useState(false);\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  // ðŸ”¥ Check authentication on mount AND whenever localStorage changes\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    setLoggedIn(!!token);\r\n  }, []);\r\n\r\n  // ðŸ”¥ Listen for login/logout changes globally\r\n  useEffect(() => {\r\n    const handleStorageChange = () => {\r\n      setLoggedIn(!!localStorage.getItem(\"token\"));\r\n    };\r\n\r\n    window.addEventListener(\"storage\", handleStorageChange);\r\n    return () => window.removeEventListener(\"storage\", handleStorageChange);\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.clear();\r\n    setLoggedIn(false);\r\n    navigate(\"/login\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navbar bg=\"dark\" variant=\"dark\" expand=\"lg\">\r\n        <Container>\r\n          <Navbar.Brand as={Link} to=\"/\">Coolgrid EV</Navbar.Brand>\r\n          <Navbar.Toggle aria-controls=\"nav\" />\r\n          <Navbar.Collapse id=\"nav\">\r\n            <Nav className=\"ms-auto\">\r\n\r\n              {!loggedIn ? (\r\n                <>\r\n                  <Nav.Link as={Link} to=\"/\">Home</Nav.Link>\r\n                  <Nav.Link as={Link} to=\"/login\">Login</Nav.Link>\r\n                  <Nav.Link as={Link} to=\"/register/customer\">Register Customer</Nav.Link>\r\n                  <Nav.Link as={Link} to=\"/register/supplier\">Register Supplier</Nav.Link>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Nav.Link as={Link} to=\"/\">Home</Nav.Link>\r\n\r\n                  <Nav.Link onClick={() => setShowProfile(true)}>\r\n                    ðŸ‘¤ My Profile\r\n                  </Nav.Link>\r\n\r\n                  <Nav.Link onClick={handleLogout}>\r\n                    ðŸšª Logout\r\n                  </Nav.Link>\r\n                </>\r\n              )}\r\n\r\n            </Nav>\r\n          </Navbar.Collapse>\r\n        </Container>\r\n      </Navbar>\r\n\r\n      {/* Profile Sliding Panel */}\r\n      <ProfileSlidePanel\r\n        show={showProfile}\r\n        onClose={() => setShowProfile(false)}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default NavigationBar;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}